<div>
    <section class="content">
        <div ng-if="joiningWaves.length > 1">
            <div class="alert alert-danger fade in">
                <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
                Hiện tại bạn đang tham gia nhiều hơn 1 đợt ĐATN, cần liên hệ giáo vụ khoa để xử lý lỗi
            </div>
        </div>

        <div ng-if="joiningWaves.length == 0">
            <div class="alert alert-warning fade in">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
                Hiện tại bạn không tham gia đợt ĐATN nào
            </div>
        </div>

        <div ng-if="joiningWaves.length == 1">

            <div class="box box-primary">

                <div class="box-header" style="text-align: center">
                    <h3 class="strong">Báo cáo tiến độ đồ án tốt nghiệp</h3>
                    Học kì {{joiningWaves[0].semester}}, năm học {{joiningWaves[0].schoolYear}} <br>
                </div>

                <br>

                <div class="box-body">
                    <div>
                        <div class="alert alert-info fade in" ng-if="successMessage" ng-cloak>
                            <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
                            {{successMessage}}
                        </div>
                        <div class="alert alert-danger fade in" ng-if="errMessage" ng-cloak>
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                            <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
                            {{errMessage}}
                        </div>
                        <div class="alert alert-warning fade in" ng-if="reports.length == 0" ng-cloak>
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                            <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
                            Thời gian báo cáo tiến độ chưa được cập nhật
                        </div>
                        <div ng-if="reports.length > 0">
                            <div>
                                <h4 class="strong"></h4>
                                <table class="table table-bordered table-hover table-middle">
                                    <thead>
                                    <td>Đợt báo cáo</td>
                                    <td>Thời gian báo cáo</td>
                                    <td>Tình trạng</td>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="report in reports">
                                        <td><a data-toggle="modal" data-target=".viewing_report_modal" ng-click="setViewingReport(report)">Báo cáo đợt {{report.ordinal}}</a></td>
                                        <td>{{report.timeSubmitReportString}}</td>
                                        <td>
                                            <span ng-if="report.status == 0">Đang lưu nháp</span>
                                            <span ng-if="report.status == 1">Đang đợi giảng viên duyệt</span>
                                            <span ng-if="report.status == 2">Đã nộp</span>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <!-- -->

        </div>

    </section>
</div>

<div class="modal fade viewing_report_modal"  aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div>
                <div class="modal-header" style="text-align: center">
                    <h3 class="strong">BÁO CÁO TIẾN ĐỘ ĐỢT {{viewing_report.ordinal}}</h3>
                </div>
                <div class="modal-body">
                    <form name="reportForm" novalidate>

                        <!-- topic-->
                        <div class="form-group">
                            <label class="control-label"><i class="fa fa-book margin-r-5"></i>Tên đề tài : </label>
                            <br>
                            Xây dựng website hỗ trợ quá trình quản lý làm đồ án tốt nghiệp tại khoa Công nghệ thông tin - ĐHBK - ĐHĐN
                        </div>

                        <!-- Progress-->
                        <div class="form-group">
                            <label class="control-label"><i class="fa fa-pencil margin-r-5"></i>Tiến độ thực hiện đề tài</label>
                            <div>
                                <div>
                                    <link rel="stylesheet" href="/resources/bower_components/bootstrap/dist/css/bootstrap.css">
                                    <table class="table table-bordered table-hover">
                                        <thead>
                                        <tr style="color: #666;">
                                            <th style="width: 25%;">Thời gian</th>
                                            <th style="width: 55%;">Nội dung công việc</th>
                                            <th>Ghi chú</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>01/01/2016 - 12/01/2016</td>
                                            <td> - Chọn đề tài <br> - Phân tích thiết kế hệ thống</td>
                                            <td></td>
                                            <td><button class="btn">Xóa</button></td>
                                        </tr>
                                        <tr ng-repeat="item in viewing_report.reportDetails track by $index">
                                            <td>
                                                {{item.startTime}} - {{item.endTime}}
                                            </td>
                                            <td>
                                                {{item.workContent}}
                                            </td>
                                            <td>
                                                {{item.note}}
                                            </td>
                                            <td><button class="btn">Xóa</button></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="input-group"  style="width: 100%;">
                                                        <textarea ng-model="reportDetail.time"
                                                                  type="text"
                                                                  style="padding: 0px"
                                                                  class="form-control"
                                                                  name="time"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="width: 100%;">
                                                        <textarea ng-model="reportDetail.content"
                                                                  type="text"
                                                                  style="padding: 0px"
                                                                  class="form-control"
                                                                  name="content"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="width: 100%;">
                                                        <textarea ng-model="reportDetail.note"
                                                                  type="text"
                                                                  style="padding: 0px;"
                                                                  class="form-control"
                                                                  name="note"></textarea>
                                                </div>
                                            </td>
                                            <td><button class="btn">Thêm</button></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- -->
                        <div class="form-group">
                            <label class="control-label"><i class="fa fa-pencil margin-r-5"></i>Nhận xét khối lượng công việc đã thực hiện được theo đề cương : </label>
                            <br>
                            <input class="form-control" style="width: 100%;" value="50%">
                        </div>

                        <!-- Student opinion-->
                        <div class="form-group">
                            <label class="control-label"><i class="fa fa-pencil margin-r-5"></i>Ý kiến của sinh viên : </label>
                            <br>
                            <textarea class="form-control" style="width: 100%;"></textarea>
                        </div>

                        <!-- Teacher opinion-->
                        <div class="form-group">
                            <label class="control-label"><i class="fa fa-pencil margin-r-5"></i>Ý kiến của giảng viên : </label>
                            <br>
                            <textarea class="form-control" style="width: 100%;"></textarea>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Nộp báo cáo</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Lưu bản nháp</button>
                    <button type="button" class="btn" data-dismiss="modal">Đóng</button>
                </div>
            </div>

        </div>
    </div>
</div>